Index of Files:
1. index.html
2. script.js
3. style.css
4. src/backendCommunications.js
5. src/categorizationPage/categorizationPage.js
6. src/categorizationPage/categoriesManager.js
7. src/categorizationPage/expenseManager.js
8. src/categorizationPage/rulesManager.js
9. src/categorizationPage/StyleExpCategorization.css
10. src/uploadPage/fileParser.js
11. src/uploadPage/uploadPage.js
12. src/visualizationPage/visualizationPage.js

****************
Filename: index.html
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ExpensesHome</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="root"></div>
  <script>
    console.log('HTML loaded, scripts about to run');
  </script>
  <script src="src/backendCommunications.js"></script>
  <script src="script.js" type="module"></script>
</body>
</html>

****************
Filename: script.js
console.log('script.js loaded and starting');

function loadPage(page) {
  console.log('loadPage called for page:', page);
  const root = document.getElementById('root');
  root.innerHTML = `
    <header class="header">
      <div class="header-container">
        <h1 class="header-title">ExpensesHome</h1>
        <nav class="nav">
          <button class="nav-button ${page === 'upload' ? 'nav-button-active' : ''}" onclick="loadPage('upload')">Upload</button>
          <button class="nav-button ${page === 'categorize' ? 'nav-button-active' : ''}" onclick="loadPage('categorize')">Categorize</button>
          <button class="nav-button ${page === 'visualize' ? 'nav-button-active' : ''}" onclick="loadPage('visualize')">Visualize</button>
        </nav>
      </div>
    </header>
    <main class="main-container ${page === 'categorize' ? 'main-container-categorize' : ''}">
      ${page === 'upload' ? `
        <h2>Upload</h2>
        <div id="upload-space" ondrop="dropHandler(event)" ondragover="dragOverHandler(event)" class="upload-space">
          Drop files here (CSV, PDF AMAZON, PDF ING)
        </div>
        <button id="delete-data" class="delete-button" onclick="window.deleteAllExpenses()">Delete All Data</button>
      ` : page === 'categorize' ? `
        <div class="grid-container">
          <div class="expense-column">
            <h2 class="column-title">Expenses</h2>
            <ul id="expense-list" class="expense-list"></ul>
          </div>
          <div class="category-column">
            <h2 class="column-title">Categories</h2>
            <div id="category-buttons" class="category-buttons"></div>
          </div>
        </div>
      ` : `
        <h2>Visualize</h2>
        <p>Visualization page placeholder</p>
      `}
    </main>
  `;
  console.log('HTML content updated for page:', page);

  // Remove existing page scripts and styles
  const existingScripts = document.querySelectorAll('script[data-page]');
  existingScripts.forEach(script => {
    console.log('Removing existing script:', script.src);
    script.remove();
  });
  const existingStyles = document.querySelectorAll('link[data-page]');
  existingStyles.forEach(style => {
    console.log('Removing existing style:', style.href);
    style.remove();
  });

  // Load page-specific scripts and styles with debug
  if (page === 'upload') {
    console.log('Loading upload page script');
    const script = document.createElement('script');
    script.src = 'src/uploadPage/uploadPage.js';
    script.type = 'module';
    script.dataset.page = 'upload';
    document.body.appendChild(script);
  } else if (page === 'categorize') {
    console.log('Loading categorize page styles and scripts');
    const style = document.createElement('link');
    style.rel = 'stylesheet';
    style.href = 'src/categorizationPage/StyleExpCategorization.css';
    style.dataset.page = 'categorize';
    document.head.appendChild(style);
    console.log('Added StyleExpCategorization.css link:', style.href);

    const expenseScript = document.createElement('script');
    expenseScript.src = 'src/categorizationPage/expenseManager.js';
    expenseScript.type = 'module';
    expenseScript.dataset.page = 'categorize';
    document.body.appendChild(expenseScript);

    expenseScript.onload = () => {
      console.log('expenseManager.js loaded, loading categoriesManager.js');
      const categoriesScript = document.createElement('script');
      categoriesScript.src = 'src/categorizationPage/categoriesManager.js';
      categoriesScript.type = 'module';
      categoriesScript.dataset.page = 'categorize';
      document.body.appendChild(categoriesScript);

      categoriesScript.onload = () => {
        console.log('categoriesManager.js loaded, loading categorizationPage.js');
        const pageScript = document.createElement('script');
        pageScript.src = 'src/categorizationPage/categorizationPage.js';
        pageScript.type = 'module';
        pageScript.dataset.page = 'categorize';
        document.body.appendChild(pageScript);
      };
    };
  } else if (page === 'visualize') {
    console.log('Loading visualize page script');
    const script = document.createElement('script');
    script.src = 'src/visualizationPage/visualizationPage.js';
    script.type = 'module';
    script.dataset.page = 'visualize';
    document.body.appendChild(script);
  }
}

// Load default page
console.log('Initializing with default page: categorize');
loadPage('categorize');

****************
Filename: style.css
/**********************************
 * RESET AND BASE STYLES
 **********************************/
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html, body {
  height: 100%;
  font-family: Arial, sans-serif;
  background-color: #fff;
  overflow-x: hidden; /* Prevent horizontal overflow at root level */
}

#root {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  width: 100vw;
}

/**********************************
 * HEADER STYLES (UNCHANGED)
 **********************************/
.header {
  background-color: #fff;
  box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  border-bottom: 1px solid #e5e5e5;
  flex-shrink: 0;
  width: 100vw;
}

.header-container {
  max-width: 1280px;
  margin: 0 auto;
  padding: 16px 32px;
  display: flex;
  align-items: center;
  gap: 24px;
}

.header-title {
  font-size: 24px;
  font-weight: bold;
  color: #1f2937;
  margin-right: 32px;
}

.nav {
  display: flex;
  gap: 24px;
}

.nav-button {
  padding: 8px 16px;
  border-radius: 4px;
  background-color: transparent;
  color: #4b5563;
  font-weight: 500;
  font-size: 18px;
  border: none;
  cursor: pointer;
  transition: background-color 0.2s, color 0.2s;
}

.nav-button:hover {
  background-color: #f3f4f6;
}

.nav-button-active {
  background-color: #000;
  color: #fff;
}

/**********************************
 * MAIN CONTAINER (COMMON)
 **********************************/
.main-container {
  max-width: 1280px;
  margin: 0 auto;
  padding: 32px;
  flex: 1;
  overflow-y: auto;
}

/**********************************
 * UPLOAD PAGE STYLES
 **********************************/
.upload-space {
  height: 200px;
  border: 2px dashed #d1d5db;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 16px;
  color: #6b7280;
  margin: 20px 0;
}

.delete-button {
  position: absolute;
  bottom: 10px;
  right: 10px;
  padding: 8px 16px;
  background-color: #dc2626;
  color: #fff;
  border: none;
  border-radius

****************
Filename: src/backendCommunications.js
async function fetchAllExpenses() {
  try {
    const response = await fetch('http://localhost:3000/expenses');
    const data = await response.json();
    console.log('Server response: Expenses fetched successfully', data);
    return { success: true, data };
  } catch (error) {
    console.error('Error fetching expenses:', error);
    return { success: false, message: error.message };
  }
}

async function fetchAllCategories() {
  try {
    const response = await fetch('http://localhost:3000/categories');
    const data = await response.json();
    console.log('Server response: Categories fetched successfully', data);
    return { success: true, data };
  } catch (error) {
    console.error('Error fetching categories:', error);
    return { success: false, message: error.message };
  }
}

async function assignCategoryToExpense(expense, level, categoryName) {
  try {
    const updatedExpense = { ...expense };
    if (level === 1) {
      updatedExpense.category1 = categoryName;
      updatedExpense.category2 = null;
      updatedExpense.category3 = null;
    } else if (level === 2) {
      updatedExpense.category2 = categoryName;
      updatedExpense.category3 = null;
    } else if (level === 3) {
      updatedExpense.category3 = categoryName;
    }
    const response = await fetch(`http://localhost:3000/expenses/${expense.id}`, {
      method: 'PUT',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(updatedExpense)
    });
    const data = await response.json();
    console.log('Server response: Category assigned to expense', data);
    return { success: true, data };
  } catch (error) {
    console.error('Error assigning category:', error);
    return { success: false, message: error.message };
  }
}

async function addNewCategory(categoryName, parentCategory) {
  try {
    const newCategory = { id: Date.now().toString(), name: categoryName, parent: parentCategory };
    const response = await fetch('http://localhost:3000/categories', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify(newCategory)
    });
    const data = await response.json();
    console.log('Server response: Category added successfully', data);
    return { success: true, data };
  } catch (error) {
    console.error('Error adding category:', error);
    return { success: false, message: error.message };
  }
}

async function deleteSingleCategory(categoryName) {
  try {
    // Fetch all categories to find the ID
    const categoriesResponse = await fetch('http://localhost:3000/categories');
    const allCategories = await categoriesResponse.json();
    const category = allCategories.find(c => c.name === categoryName);
    if (!category) throw new Error('Category not found');

    const categoryId = category.id;

    // Update expenses referencing this category
    const expensesResponse = await fetch('http://localhost:3000/expenses');
    const expenses = await expensesResponse.json();
    for (const expense of expenses) {
      let needsUpdate = false;
      const updatedExpense = { ...expense };
      if (expense.category1 === categoryName) {
        updatedExpense.category1 = null;
        updatedExpense.category2 = null;
        updatedExpense.category3 = null;
        needsUpdate = true;
      } else if (expense.category2 === categoryName) {
        updatedExpense.category2 = null;
        updatedExpense.category3 = null;
        needsUpdate = true;
      } else if (expense.category3 === categoryName) {
        updatedExpense.category3 = null;
        needsUpdate = true;
      }
      if (needsUpdate) {
        await fetch(`http://localhost:3000/expenses/${expense.id}`, {
          method: 'PUT',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(updatedExpense)
        });
      }
    }

    // Delete the category
    const response = await fetch(`http://localhost:3000/categories/${categoryId}`, {
      method: 'DELETE'
    });
    if (response.ok) {
      console.log('Server response: Category deleted successfully', { id: categoryId });
      return { success: true, data: { id: categoryId } };
    } else {
      throw new Error('Failed to delete category');
    }
  } catch (error) {
    console.error('Error deleting single category:', error);
    return { success: false, message: error.message };
  }
}

async function deleteAllExpenses() {
  try {
    const response = await fetch('http://localhost:3000/expenses', {
      method: 'DELETE'
    });
    if (response.ok) {
      console.log('Server response: All expenses deleted successfully');
      return { success: true };
    } else {
      throw new Error('Failed to delete expenses');
    }
  } catch (error) {
    console.error('Error deleting expenses:', error);
    return { success: false, message: error.message };
  }
}

// Expose functions to window object
window.fetchAllExpenses = fetchAllExpenses;
window.fetchAllCategories = fetchAllCategories;
window.assignCategoryToExpense = assignCategoryToExpense;
window.addNewCategory = addNewCategory;
window.deleteSingleCategory = deleteSingleCategory;
window.deleteAllExpenses = deleteAllExpenses;

****************
Filename: src/categorizationPage/categorizationPage.js
// frontend/src/categorizationPage/categorizationPage.js
console.log('categorizationPage.js loaded');

// Initialize the categorization page and start the loading process
export async function initializeCategorization() {
    console.log('initializeCategorization started');
    await loadPage();
}

// Load page data and set up the initial display
async function loadPage() {
    console.log('loadPage started');
    const expenseList = document.getElementById('expense-list');
    if (!expenseList) {
        console.error('expense-list element not found');
        return;
    }
    expenseList.innerHTML = '';

    try {
        console.log('Fetching expenses and categories...');
        const [fetchExpensesResult, fetchCategoriesResult] = await Promise.all([
            window.fetchAllExpenses(),
            window.fetchAllCategories()
        ]);
        window.expensesList = fetchExpensesResult.success ? fetchExpensesResult.data : [];
        window.categoriesList = fetchCategoriesResult.success ? fetchCategoriesResult.data : [];
        console.log('Expenses list at startup:', window.expensesList);
        console.log('Categories list:', window.categoriesList);
    } catch (error) {
        console.error('Fetch error in loadPage:', error);
        window.expensesList = [];
        window.categoriesList = [];
    }

    if (window.expensesList.length > 0) {
        console.log('Initializing expense selection...');
        selectedExpenseId = window.expensesList[0].id; // Select the first expense
        console.log('Selected expense ID:', selectedExpenseId);
        updateExpenseDisplay();
        window.categoriesManager.updateCategoryButtons(selectedExpenseId, window.expensesList, window.categoriesList);
    } else {
        console.log('No expenses found, setting no-data message');
        expenseList.innerHTML = '<p class="no-data">No expenses found</p>';
    }
    console.log('loadPage completed');
}

// Update the display of expenses based on the current list and selection
function updateExpenseDisplay() {
    console.log('updateExpenseDisplay called');
    if (window.expenseManager) {
        window.expenseManager.updateExpenseDisplay(window.expensesList, selectedExpenseId);
    } else {
        console.error('expenseManager not found');
    }
    console.log('updateExpenseDisplay completed');
}

let selectedExpenseId = null;

if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', () => {
        console.log('DOMContentLoaded in categorizationPage.js');
        initializeCategorization();
    });
} else {
    console.log('Document already loaded, calling initializeCategorization');
    initializeCategorization();
}

// Handle expense selection events to update the display
document.getElementById('expense-list')?.addEventListener('expenseSelected', (e) => {
    console.log('expenseSelected event received, new ID:', e.detail.id);
    selectedExpenseId = e.detail.id;
    updateExpenseDisplay();
    window.categoriesManager.updateCategoryButtons(selectedExpenseId, window.expensesList, window.categoriesList);
});

****************
Filename: src/categorizationPage/categoriesManager.js
// frontend/src/categorizationPage/categoriesManager.js
console.log('categoriesManager.js loaded');

const categoriesManager = {
    // Update category buttons based on the selected expense ID
    updateCategoryButtons(selectedExpenseId, expensesList, categoriesList) {
        console.log('updateCategoryButtons called for expense ID:', selectedExpenseId);
        const categoryButtons = document.getElementById('category-buttons');
        if (!categoryButtons) {
            console.error('category-buttons element not found');
            return;
        }
        categoryButtons.innerHTML = ''; // Clear existing buttons

        if (!selectedExpenseId || !expensesList || !categoriesList) {
            console.log('No selected expense, expenses list, or categories list');
            return;
        }

        const expense = expensesList.find(e => e.id === selectedExpenseId);
        if (!expense) {
            console.log('Expense not found for ID:', selectedExpenseId);
            return;
        }

        let levelToDisplay;
        let parentCategoryName = null;

        // Rule 1: No categories, show Level 1 categories
        if (!expense.category1) {
            levelToDisplay = 1;
            console.log('No categories assigned, displaying Level 1 categories');
        }
        // Rule 2: Has categories
        else {
            // If only Level 1, show Level 2 categories (parent is Level 1)
            if (expense.category1 && !expense.category2) {
                levelToDisplay = 2;
                parentCategoryName = expense.category1;
                console.log(`Level 1 category (${expense.category1}) assigned, displaying Level 2 categories`);
            }
            // If Level 1 and Level 2 (or all three), show Level 3 categories (parent is Level 2)
            else if (expense.category2) {
                levelToDisplay = 3;
                parentCategoryName = expense.category2;
                console.log(`Level 2 category (${expense.category2}) assigned, displaying Level 3 categories`);
            }
        }

        // Filter categories based on the determined level and parent
        const categoriesToShow = categoriesList.filter(cat => {
            if (levelToDisplay === 1) return !cat.parent; // Level 1: no parent
            return cat.parent === parentCategoryName; // Level 2 or 3: match parent name
        });

        // Log for debugging
        console.log(`expense selected: ${selectedExpenseId}, categories: ${JSON.stringify(categoriesToShow.map(cat => cat.name))}`);
        console.log(`searching for children of: ${parentCategoryName || 'none (Level 1)'}`);
        console.log(`children found: ${JSON.stringify(categoriesToShow.map(cat => cat.name))}`);

        // Render buttons for the selected level
        categoriesToShow.forEach(cat => {
            const button = document.createElement('button');
            button.textContent = cat.name;
            button.className = `category-button level-${levelToDisplay}`;
            button.onclick = async () => {
                console.log(`Assigning category ${cat.name} at level ${levelToDisplay} to expense ${selectedExpenseId}`);
                const result = await window.assignCategoryToExpense(expense, levelToDisplay, cat.name);
                if (result.success) {
                    console.log('Category assigned successfully:', result.data);
                    const index = expensesList.findIndex(e => e.id === selectedExpenseId);
                    if (index !== -1) {
                        expensesList[index] = result.data;
                    }
                    window.expenseManager.updateExpenseDisplay(expensesList, selectedExpenseId);
                    // Auto-select next expense after Level 3 assignment
                    if (levelToDisplay === 3) {
                        console.log('Level 3 assigned, selecting next expense');
                        const currentIndex = expensesList.findIndex(e => e.id === selectedExpenseId);
                        const nextIndex = currentIndex + 1 < expensesList.length ? currentIndex + 1 : 0;
                        const nextExpenseId = expensesList[nextIndex].id;
                        console.log(`Dispatching expenseSelected event for next expense ID: ${nextExpenseId}, index: ${nextIndex}`);
                        const expenseList = document.getElementById('expense-list');
                        if (expenseList) {
                            expenseList.dispatchEvent(new CustomEvent('expenseSelected', { detail: { id: nextExpenseId } }));
                            // Scroll to top if selecting first expense
                            if (nextIndex === 0) {
                                expenseList.scrollTop = 0;
                                console.log('Scrolled to top of expense list');
                            }
                        } else {
                            console.error('expense-list not found for dispatching event');
                        }
                    } else {
                        this.updateCategoryButtons(selectedExpenseId, expensesList, categoriesList);
                    }
                } else {
                    console.error('Failed to assign category:', result.message);
                    alert('Failed to assign category: ' + result.message);
                }
            };
            categoryButtons.appendChild(button);
        });

        // Add three dots button for adding a new category
        const addButton = document.createElement('button');
        addButton.className = `category-button add-category level-${levelToDisplay}`;
        addButton.innerHTML = 'â‹®'; // Three dots symbol
        addButton.title = `Add new category to Level ${levelToDisplay}`;
        addButton.onclick = () => {
            // Replace button with input field
            const input = document.createElement('input');
            input.type = 'text';
            input.className = `category-button add-category level-${levelToDisplay} editing`;
            input.style.minWidth = '100px';
            input.style.caretColor = '#fff'; // White cursor
            categoryButtons.replaceChild(input, addButton);
            input.focus();

            // Handle input submission (Enter key or blur)
            const submitCategory = async () => {
                const categoryName = input.value.trim();
                if (categoryName) {
                    // Validate: must have at least 2 alphabetic letters
                    const alphabeticCount = (categoryName.match(/[a-zA-Z]/g) || []).length;
                    if (alphabeticCount < 2) {
                        console.log(`Invalid category name: ${categoryName}, only ${alphabeticCount} alphabetic letters`);
                        // Silently restore three dots button
                        categoryButtons.replaceChild(addButton, input);
                        return;
                    }
                    const parentCategory = levelToDisplay === 1 ? null :
                        levelToDisplay === 2 ? expense.category1 :
                        expense.category2;
                    const result = await window.addNewCategory(categoryName, parentCategory);
                    if (result.success) {
                        console.log('New category added:', result.data);
                        categoriesList.push(result.data);
                        this.updateCategoryButtons(selectedExpenseId, expensesList, categoriesList);
                    } else {
                        console.error('Failed to add category:', result.message);
                        alert('Failed to add category: ' + result.message);
                        // Restore three dots button
                        categoryButtons.replaceChild(addButton, input);
                    }
                } else {
                    // Empty input, restore three dots button
                    categoryButtons.replaceChild(addButton, input);
                }
            };

            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    submitCategory();
                }
            });

            input.addEventListener('blur', submitCategory);
        };
        categoryButtons.appendChild(addButton);

        console.log('updateCategoryButtons completed');
    }
};

window.categoriesManager = categoriesManager;
console.log('categoriesManager initialized');

****************
Filename: src/categorizationPage/expenseManager.js
// frontend/src/categorizationPage/expenseManager.js
console.log('expenseManager.js loaded');

const expenseManager = {
    // Render the list of expenses with their categories and highlight the selected one
    updateExpenseDisplay(expenses, selectedExpenseId) {
        console.log('updateExpenseDisplay called with expenses:', expenses.length, 'selectedExpenseId:', selectedExpenseId);
        const expenseList = document.getElementById('expense-list');
        if (!expenseList) {
            console.error('expense-list element not found');
            return;
        }
        expenseList.innerHTML = '';

        expenses.forEach(expense => {
            const expenseItem = document.createElement('li');
            expenseItem.className = 'expense-item';
            expenseItem.innerHTML = `
                <span class="expense-date">${expense.date}</span>
                <span class="expense-description">${expense.description}</span>
                <span class="expense-amount ${expense.amount < 0 ? 'expense-negative' : 'expense-positive'}">${expense.amount}</span>
            `;
            if (expense.amount < 0) expenseItem.classList.add('expense-negative');
            else if (expense.amount > 0) expenseItem.classList.add('expense-positive');

            // Add categories section using category1, category2, category3 with level classes
            const categoryTags = document.createElement('div');
            categoryTags.className = 'category-tags';
            const categories = [
                { name: expense.category1, level: 1 },
                { name: expense.category2, level: 2 },
                { name: expense.category3, level: 3 }
            ].filter(c => c.name !== null && c.name !== undefined); // Filter out null/undefined
            if (categories.length > 0) {
                categories.forEach(cat => {
                    const tag = document.createElement('button');
                    tag.textContent = cat.name;
                    const className = `expense-category-button level-${cat.level}`;
                    tag.className = className;
                    console.log(`Assigning class to ${cat.name}: ${className}`); // Debug log
                    // Add click handler for category deletion
                    tag.onclick = async (e) => {
                        e.stopPropagation(); // Prevent expense selection
                        console.log(`Clicked category ${cat.name} (level ${cat.level}) for expense ${expense.id}`);
                        // Update the local expenses array
                        try {
                            const result = await window.assignCategoryToExpense(expense, cat.level, null);
                            if (result.success) {
                                console.log('Category removed successfully:', result.data);
                                // Update local expenses array
                                const index = expenses.findIndex(e => e.id === expense.id);
                                if (index !== -1) {
                                    expenses[index] = result.data;
                                    console.log('Updated local expenses with:', result.data);
                                } else {
                                    console.error('Expense not found in local expenses:', expense.id);
                                }
                                // Try to update window.expensesList if it exists
                                if (window.expensesList) {
                                    const globalIndex = window.expensesList.findIndex(e => e.id === expense.id);
                                    if (globalIndex !== -1) {
                                        window.expensesList[globalIndex] = result.data;
                                        console.log('Updated window.expensesList with:', result.data);
                                    } else {
                                        console.error('Expense not found in window.expensesList:', expense.id);
                                    }
                                } else {
                                    console.warn('window.expensesList is undefined, using local expenses array');
                                }
                                // Dispatch expenseSelected event to trigger UI update
                                console.log(`Dispatching expenseSelected event for expense ${expense.id} after removing category`);
                                expenseList.dispatchEvent(new CustomEvent('expenseSelected', { detail: { id: expense.id } }));
                            } else {
                                console.error('Failed to remove category:', result.message);
                                alert('Failed to remove category: ' + result.message);
                            }
                        } catch (error) {
                            console.error('Error during category deletion:', error);
                            alert('Error removing category: ' + error.message);
                        }
                    };
                    categoryTags.appendChild(tag);
                });
            } // Left empty if no categories
            expenseItem.appendChild(categoryTags);

            // Highlight the selected expense
            if (expense.id === selectedExpenseId) {
                expenseItem.classList.add('selected');
            }

            // Trigger selection event when an expense is clicked
            expenseItem.onclick = () => {
                const event = new CustomEvent('expenseSelected', { detail: { id: expense.id } });
                expenseList.dispatchEvent(event);
            };

            expenseList.appendChild(expenseItem);
        });
        console.log('updateExpenseDisplay completed');
    }
};

window.expenseManager = expenseManager;
console.log('expenseManager initialized');

****************
Filename: src/categorizationPage/rulesManager.js


****************
Filename: src/categorizationPage/StyleExpCategorization.css
/**********************************
 * CATEGORIZATION PAGE LAYOUT
 **********************************/
.main-container-categorize {
 width: 100vw;
 margin: 0;
 padding: 0;
 box-sizing: border-box;
 max-width: 100vw !important;
 margin-left: 0 !important;
 margin-right: 0 !important;
}

.grid-container {
 display: grid;
 grid-template-columns: 70% 30%;
 width: 100vw;
 height: 100%;
 box-sizing: border-box;
 overflow-x: hidden;
 max-width: 100vw !important;
 margin: 0 !important;
 padding: 0 !important;
}

.expense-column {
 padding: 16px;
 overflow-y: visible;
 box-sizing: border-box;
 height: auto;
 max-width: 100%;
}

.category-column {
 padding: 16px;
 overflow-y: auto;
 box-sizing: border-box;
 max-width: 100%;
}

.column-title {
 font-size: 20px;
 font-weight: bold;
 color: #1f2937;
 margin-bottom: 16px;
}

/**********************************
 * EXPENSE LIST STYLES
 **********************************/
.expense-list {
 list-style: none;
 width: 100%;
 max-width: 100%;
 padding: 0;
 margin: 0;
}

.expense-item {
 padding: 8px 12px;
 border-bottom: 1px solid #e5e5e5;
 cursor: pointer;
 font-size: 16px;
 color: #000;
 transition: background -color 0.2s;
 display: grid;
 grid-template-rows: 30px auto;
 grid-template-columns: 10% 70% 20%;
 align-items: center;
 gap: 8px;
 height: 80px;
 box-sizing: border-box;
 max-width: 100%;
 overflow-x: hidden;
 padding-right: 16px;
}

.expense-item:hover {
 background-color: #f9fafb;
}

.expense-item.selected {
 background-color: #e5e7eb;
}

.expense-date {
 grid-column: 1 / 2;
 overflow: hidden;
 text-overflow: ellipsis;
 white-space: nowrap;
 min-width: 0;
}

.expense-description {
 grid-column: 2 / 3;
 overflow: hidden;
 text-overflow: ellipsis;
 white-space: nowrap;
 min-width: 0;
}

.expense-amount {
 grid-column: 3 / 4;
 font-weight: bold;
 text-align: right;
 overflow: visible;
 white-space: nowrap;
 min-width: 8ch;
 max-width: 100%;
 padding-right: 4px;
}

.expense-negative .expense-amount {
 color: #dc2626;
}

.expense-positive .expense-amount {
 color: #16a34a;
}

/**********************************
 * CATEGORY TAGS AND BUTTONS
 **********************************/
.category-tags {
 grid-row: 2 / 3;
 grid-column: 1 / -1;
 display: flex;
 flex-direction: row;
 gap: 4px;
 align-items: center;
 min-height: 0;
 max-width: 100%;
 overflow-x: auto;
 flex-shrink: 0;
 max-height: 30px;
}

.expense-category-button {
 padding: 4px 8px;
 color: #fff;
 border: none;
 border-radius: 4px;
 cursor: pointer;
 font-size: 12px;
 transition: background-color 0.2s;
 white-space: nowrap;
 overflow: hidden;
 text-overflow: ellipsis;
 min-width: 80px;
 max-width: 100%;
}

.expense-category-button:hover {
 /* No default hover, rely on level hover styles */
}

.expense-category-button.level-1 {
 background-color: #3b82f6;
}

.expense-category-button.level-1:hover {
 background-color: #2563eb;
}

.expense-category-button.level-2 {
 background-color: #f97316;
}

.expense-category-button.level-2:hover {
 background-color: #ea580c;
}

.expense-category-button.level-3 {
 background-color: #dc2626;
}

.expense-category-button.level-3:hover {
 background-color: #b91c1c;
}

/* Category selection buttons in category column */
#category-buttons {
 display: flex;
 flex-direction: row;
 flex-wrap: wrap;
 gap: 8px;
 margin-top: 4px;
}

.delete-toggle-button {
 padding: 4px 8px;
 background-color: #dc2626;
 color: #fff;
 border: none;
 border-radius: 4px;
 cursor: pointer;
 font-size: 12px;
 transition: background-color 0.2s;
}

.delete-toggle-button:hover {
 background-color: #b91c1c;
}

#category-buttons.delete-mode .category-button {
 background-color: #bfdbfe;
}

#category-buttons.delete-mode .category-button:hover {
 background-color: #60a5fa;
}

#category-buttons.delete-mode .category-button.level-2 {
 background-color: #fed7aa;
}

#category-buttons.delete-mode .category-button.level-2:hover {
 background-color: #fb923c;
}

#category-buttons.delete-mode .category-button.level-3 {
 background-color: #fecaca;
}

#category-buttons.delete-mode .category-button.level-3:hover {
 background-color: #f87171;
}

.category-button {
 padding: 8px 16px;
 color: #fff;
 border: none;
 border-radius: 4px;
 cursor: pointer;
 font-size: 14px;
 transition: background-color 0.2s;
 white-space: nowrap;
 background-color: #3b82f6;
}

.category-button:hover {
 background-color: #2563eb;
}

.category-button.level-2 {
 background-color: #f97316;
}

.category-button.level-2:hover {
 background-color: #ea580c;
}

.category-button.level-3 {
 background-color: #dc2626;
}

.category-button.level-3:hover {
 background-color: #b91c1c;
}

.category-button.add-category {
 padding: 8px;
 min-width: 32px;
 font-size: 16px;
 color: #fff;
 border: none;
 display: flex;
 align-items: center;
 justify-content: center;
}

.category-button.add-category.level-1 {
 background-color: #3b82f6;
}

.category-button.add-category.level-1:hover {
 background-color: #2563eb;
}

.category-button.add-category.level-2 {
 background-color: #f97316;
}

.category-button.add-category.level-2:hover {
 background-color: #ea580c;
}

.category-button.add-category.level-3 {
 background-color: #dc2626;
}

.category-button.add-category.level-3:hover {
 background-color: #b91c1c;
}

.category-button.editing {
 color: #fff;
 border: none;
 min-width: 100px;
 outline: none;
 caret-color: #fff;
 font-weight: normal; /* Match category button font */
 font-size: 14px; /* Match category button font */
}

.category-button.editing::selection {
 background: rgba(255, 255, 255, 0.3);
 color: #fff;
}

****************
Filename: src/uploadPage/fileParser.js
 // Placeholder for file parsing logic


****************
Filename: src/uploadPage/uploadPage.js
 // Placeholder for upload page logic
function dropHandler(ev) {
  ev.preventDefault();
  console.log('File dropped');
}

function dragOverHandler(ev) {
  ev.preventDefault();
}


****************
Filename: src/visualizationPage/visualizationPage.js
 // Placeholder for visualization page logic

